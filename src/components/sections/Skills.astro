---
import { skills, type Skill } from '../../constants/content';

interface Props {
  lang: 'en' | 'es';
}

const { lang = 'en' }: Props = Astro.props;

const sectionTitle: { en: string; es: string } = {
  en: 'Skills.',
  es: 'Habilidades.',
};

const categoryTitles: {
  en: Record<string, string>;
  es: Record<string, string>;
} = {
  en: {
    frontend: 'Frontend',
    backend: 'Backend',
    database: 'Database',
    tools: 'Tools',
    soft: 'Soft Skills',
  },
  es: {
    frontend: 'Frontend',
    backend: 'Backend',
    database: 'Base de Datos',
    tools: 'Herramientas',
    soft: 'Habilidades Blandas',
  },
};

const groupedSkills = skills.reduce(
  (acc: Record<string, Skill[]>, skill: Skill) => {
    if (!acc[skill.category]) {
      acc[skill.category] = [];
    }
    acc[skill.category].push(skill);
    return acc;
  },
  {}
);
---

<section id="skills" class="py-20 px-6 bg-dark-800/30">
  <div class="container mx-auto">
    <h2 class="text-4xl lg:text-6xl font-bold text-center mb-16">
      {sectionTitle[lang]}
    </h2>

    <div class="max-w-6xl mx-auto">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
          Object.entries(groupedSkills).map(([category, categorySkills]) => (
            <div class="bg-dark-800/50 backdrop-blur-sm rounded-lg p-6">
              <h3 class="text-xl font-bold text-primary-400 mb-6 text-center">
                {categoryTitles[lang][category]}
              </h3>

              <div class="space-y-4">
                {categorySkills.map((skill) => (
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-white font-medium">{skill.name}</span>
                      {skill.years && (
                        <span class="text-gray-400 text-sm">
                          {skill.years} {lang === 'en' ? 'yrs' : 'a√±os'}
                        </span>
                      )}
                    </div>
                    <div class="w-full bg-dark-700 rounded-full h-2">
                      <div
                        class="bg-gradient-to-r from-primary-400 to-primary-500 h-2 rounded-full transition-all duration-1000"
                        style={`width: ${skill.level}%`}
                      />
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
